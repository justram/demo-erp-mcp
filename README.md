# Demo ERP MCP Project

This project demonstrates an ERP system with an AI agent powered by MCP.

## Real Quickstart (Recommended)

This project includes an automated script to get you up and running quickly. 

1.  **Ensure you have Python 3.8+ and `bash` available.**
2.  **Make the script executable (if needed):**
    ```bash
    chmod +x start.sh
    ```
3.  **Run the script:**
    ```bash
    ./start.sh 
    ```
    The script will guide you through:
    *   Entering your `GOOGLE_API_KEY` (which will be saved to a `.env` file).
    *   A reminder to set up and activate your Python virtual environment.
    *   Installing project dependencies (using `uv` if available, otherwise `pip`).
    *   Preparing the sample data and SQLite database using `scripts/prepare_sql_mcp_db.sh`.
    *   Changing to the `src` directory and starting the ADK web UI with `adk web`.

After the script completes, access the demo in your web browser, typically at the address shown in your terminal (e.g., `http://localhost:PORT_NUMBER`).

## Manual Setup Steps

If you prefer to set up the project manually, follow these steps:

1.  **Create and Activate a Virtual Environment (Recommended)**:
    ```bash
    python -m venv .venv
    source .venv/bin/activate  # On Windows use `source .venv/Scripts/activate`
    ```

2.  **Install Dependencies using uv**:
    If you have `uv` installed, you can sync your environment with the locked dependencies:
    ```bash
    uv pip sync uv.lock
    ```
    Alternatively, if you prefer to use `pip` with a `requirements.txt` (though `uv.lock` is preferred if available):
    ```bash
    # Ensure requirements.txt is generated from pyproject.toml or uv.lock
    # uv pip compile pyproject.toml -o requirements.txt
    # pip install -r requirements.txt
    ```

3.  **Set up Environment Variables**:
    Create a `.env` file in the project root and add your API key. For example:
    ```env
    GOOGLE_API_KEY=YOUR_API_KEY_HERE
    ```
    Replace `YOUR_API_KEY_HERE` with your actual API key. This file should be added to your `.gitignore` if not already.

4.  **Prepare Sample Data and SQL MCP Database (Automated)**:
    This project includes a script to automate the generation of sample data, loading it into a SQLite database, and setting it up for the SQL MCP tools.
    ```bash
    bash scripts/prepare_sql_mcp_db.sh
    ```
    This script consolidates the data preparation steps and will:
    1. Run `python scripts/make_samples.py` to generate data.
    2. Run `python scripts/load_to_sql.py` to create `erp_demo.db` in the project root.
    3. Create the `sql_mcp/data/` directory if it doesn't exist.
    4. Move `erp_demo.db` to `sql_mcp/data/erp_demo.db`.
    5. Copy `data/schema.yaml` to `sql_mcp/data/schema.yaml` (if `data/schema.yaml` exists).

    This single script simplifies the setup process for the SQL MCP demonstration and prepares the database for the SQL tools.

5.  **Run the Agent Demo**:
    Navigate to the `src` directory and start the ADK web UI.
    ```bash
    cd src
    adk web
    ```
    Access the demo in your web browser, typically at `http://localhost:PORT_NUMBER`.

## Troubleshooting steps

If you encounter issues, consider the following:

-   **Dependencies**: Ensure all project dependencies are installed. Check `pyproject.toml` or `requirements.txt` (if available) and install them, preferably in a virtual environment.
-   **Python Version**: Verify you are using a compatible Python version.
-   **Database Connection**: Double-check that the database path is correct in any configurations and that the database file exists and has been populated.
-   **Data Loading**: Confirm that the data generation and loading scripts (`make_samples.py`, `load_to_sql.py`) ran without errors and that data is present in the database tables.
-   **ADK Issues**: If `adk web` fails, check for error messages in the terminal. Ensure ADK is installed correctly and is compatible with your project.
-   **Logs**: Consult any application or server logs for more detailed error messages.
-   **Permissions**: Ensure scripts have execute permissions if needed, and that there are write permissions for creating the database and data files. 

## Prepare new datasets for the demo

This section outlines the steps to prepare new datasets for the demonstration.

### 1. Prepare Pseudo Data and Schema

- **Generate Pseudo Data**: Run the `scripts/make_samples.py` script to generate pseudo-random sample data.
  ```bash
  python scripts/make_samples.py
  ```
  This script is expected to output JSONL files (e.g., `customers.jsonl`, `orders.jsonl`) into the `data/` directory.
- **Schema**: Ensure the corresponding schema files (e.g., `customers_schema.json`, `orders_schema.json`) are present in the `data/` directory or are generated by the script. These schemas define the structure of your data.

### 2. Setup the Sample Database

- **Load Data into Database**: Use the `scripts/load_to_sql.py` script to load the generated JSONL data into a SQLite database.
  ```bash
  python scripts/load_to_sql.py
  ```
  This script will typically create/populate a SQLite database file (e.g., `erp_demo.db`).
- **Database Location for SQL MCP**: Ensure that the generated database (e.g., `data/erp_demo.db` or `sql_mcp/erp_demo.db`) is correctly configured and accessible by the SQL MCP tools. You might need to update configuration files to point to the correct database path. The `sql_mcp` tools might expect the database to be in a specific location like `sql_mcp/data/erp_demo.db`. Please check the `mcp_sql-mcp_configure_database_connection` tool's default or how it's being called. 

## License

This project is licensed under the Apache License, Version 2.0. See the [LICENSE](LICENSE) file for details. 